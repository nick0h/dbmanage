{% extends "base.html" %}
{% load static %}

{% block content %}
<div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-3">
        <h2>Data Management</h2>
        <a href="{% url 'home' %}" class="btn btn-outline-secondary">
            <i class="fas fa-home me-2"></i>Back to Homepage
        </a>
    </div>
    
    <div class="row justify-content-center">
        <!-- Requestor Management -->
        <div class="col-md-6 mb-4">
            <div class="card h-100 shadow-sm">
                <div class="card-body">
                    <h3 class="card-title text-center mb-4">Requestors</h3>
                    <div class="d-grid gap-3">
                        <a href="{% url 'requestor_list' %}" class="btn btn-primary">
                            <i class="fas fa-users me-2"></i>View Requestors
                        </a>
                        <a href="{% url 'requestor_create' %}" class="btn btn-success">
                            <i class="fas fa-user-plus me-2"></i>Add Requestor
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Antibody Management -->
        <div class="col-md-6 mb-4">
            <div class="card h-100 shadow-sm">
                <div class="card-body">
                    <h3 class="card-title text-center mb-4">Antibodies</h3>
                    <div class="d-grid gap-3">
                        <a href="{% url 'antibody_list' %}" class="btn btn-primary">
                            <i class="fas fa-vial me-2"></i>View Antibodies
                        </a>
                        <a href="{% url 'antibody_create' %}" class="btn btn-success">
                            <i class="fas fa-plus me-2"></i>Add Antibody
                        </a>
                        <button class="btn btn-info" data-bs-toggle="modal" data-bs-target="#importAntibodyModal">
                            <i class="fas fa-file-import me-2"></i>Add Antibodies from File
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Tissue Management -->
        <div class="col-md-6 mb-4">
            <div class="card h-100 shadow-sm">
                <div class="card-body">
                    <h3 class="card-title text-center mb-4">Tissues</h3>
                    <div class="d-grid gap-3">
                        <a href="{% url 'tissue_list' %}" class="btn btn-primary">
                            <i class="fas fa-microscope me-2"></i>View Tissues
                        </a>
                        <a href="{% url 'tissue_create' %}" class="btn btn-success">
                            <i class="fas fa-plus me-2"></i>Add Tissue
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Status Management -->
        <div class="col-md-6 mb-4">
            <div class="card h-100 shadow-sm">
                <div class="card-body">
                    <h3 class="card-title text-center mb-4">Statuses</h3>
                    <div class="d-grid gap-3">
                        <a href="{% url 'status_list' %}" class="btn btn-primary">
                            <i class="fas fa-tasks me-2"></i>View Statuses
                        </a>
                        <a href="{% url 'status_create' %}" class="btn btn-success">
                            <i class="fas fa-plus me-2"></i>Add Status
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Assignee Management -->
        <div class="col-md-6 mb-4">
            <div class="card h-100 shadow-sm">
                <div class="card-body">
                    <h3 class="card-title text-center mb-4">Assignees</h3>
                    <div class="d-grid gap-3">
                        <a href="{% url 'assignee_list' %}" class="btn btn-primary">
                            <i class="fas fa-user-tie me-2"></i>View Assignees
                        </a>
                        <a href="{% url 'assignee_create' %}" class="btn btn-success">
                            <i class="fas fa-plus me-2"></i>Add Assignee
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Probe Management -->
        <div class="col-md-6 mb-4">
            <div class="card h-100 shadow-sm">
                <div class="card-body">
                    <h3 class="card-title text-center mb-4">Probes</h3>
                    <div class="d-grid gap-3">
                        <a href="{% url 'probe_list' %}" class="btn btn-primary">
                            <i class="fas fa-dna me-2"></i>View Probes
                        </a>
                        <a href="{% url 'probe_create' %}" class="btn btn-success">
                            <i class="fas fa-plus me-2"></i>Add Probe
                        </a>
                    </div>
                </div>
            </div>
        </div>

        <!-- Study Management -->
        <div class="col-md-6 mb-4">
            <div class="card h-100 shadow-sm">
                <div class="card-body">
                    <h3 class="card-title text-center mb-4">Studies</h3>
                    <div class="d-grid gap-3">
                        <a href="{% url 'study_list' %}" class="btn btn-primary">
                            <i class="fas fa-book me-2"></i>View Studies
                        </a>
                        <a href="{% url 'study_create' %}" class="btn btn-success">
                            <i class="fas fa-plus me-2"></i>Add Study
                        </a>
                        <button class="btn btn-info" data-bs-toggle="modal" data-bs-target="#importStudyModal">
                            <i class="fas fa-file-import me-2"></i>Add Studies from File
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Priority Management -->
        <div class="col-md-6 mb-4">
            <div class="card h-100 shadow-sm">
                <div class="card-body">
                    <h3 class="card-title text-center mb-4">Priorities</h3>
                    <div class="d-grid gap-3">
                        <a href="{% url 'priority_list' %}" class="btn btn-primary">
                            <i class="fas fa-flag me-2"></i>View Priorities
                        </a>
                        <a href="{% url 'priority_create' %}" class="btn btn-success">
                            <i class="fas fa-plus me-2"></i>Add Priority
                        </a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="row mt-4">
        <div class="col text-center">
            <a href="{% url 'home' %}" class="btn btn-secondary">
                <i class="fas fa-home me-2"></i>Back to Home
            </a>
        </div>
    </div>
</div>

<!-- Add Font Awesome for icons -->
<link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.4/css/all.min.css" rel="stylesheet">

<!-- Import Antibody Modal -->
<div class="modal fade" id="importAntibodyModal" tabindex="-1" aria-labelledby="importAntibodyModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="importAntibodyModalLabel">Import Antibodies from Excel File</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <form action="{% url 'import_antibodies' %}" method="post" enctype="multipart/form-data">
                {% csrf_token %}
                <div class="modal-body">
                    <div class="mb-3">
                        <label for="antibodyFile" class="form-label">Select Excel File (.xlsx)</label>
                        <input type="file" class="form-control" id="antibodyFile" name="file" accept=".xlsx" required>
                        <div class="form-text">
                            The file should have columns with headers "Name", "Description", "Antigen", "Species", "Recognizes", and "Vendor" (case insensitive).
                            The first row should contain the headers, and data should start from the second row.
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="submit" class="btn btn-success">Import Antibodies</button>
                </div>
            </form>
        </div>
    </div>
</div>
<!-- Import Study Modal -->
<div class="modal fade" id="importStudyModal" tabindex="-1" aria-labelledby="importStudyModalLabel" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="importStudyModalLabel">Import Studies from Excel File</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <form action="{% url 'import_studies' %}" method="post" enctype="multipart/form-data">
                {% csrf_token %}
                <div class="modal-body">
                    <div class="mb-3">
                        <label for="studyFile" class="form-label">Select Excel File (.xlsx)</label>
                        <input type="file" class="form-control" id="studyFile" name="file" accept=".xlsx" required>
                        <div class="form-text">
                            The file should have columns with headers "Study ID" and "Title" (case insensitive).
                            The first row should contain the headers, and data should start from the second row.
                        </div>
                    </div>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancel</button>
                    <button type="submit" class="btn btn-success">Import Studies</button>
                </div>
            </form>
        </div>
    </div>
</div>
{% endblock %} 